{"ast":null,"code":"var _jsxFileName = \"/Users/mo/Desktop/BookMent_FullProject/frontend/bookment-frontend/src/pages/Dashboard.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { fetchBooks, borrowBook } from \"../services/books\";\nimport BookForm from \"../components/BookForm\";\nimport { myBorrows } from \"../services/books\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Dashboard() {\n  _s();\n  const [books, setBooks] = useState([]);\n  const [borrows, setBorrows] = useState([]);\n  useEffect(() => load(), []);\n  const load = async () => {\n    const b = await fetchBooks();\n    setBooks(b);\n    try {\n      const mb = await myBorrows();\n      setBorrows(mb);\n    } catch (e) {\n      setBorrows([]);\n    }\n  };\n  const handleBorrow = async id => {\n    try {\n      await borrowBook(id);\n      alert(\"Borrowed!\");\n      load();\n    } catch (err) {\n      var _err$response;\n      alert((err === null || err === void 0 ? void 0 : (_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.data) || \"Error borrowing\");\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Dashboard\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: \"flex\",\n        gap: 16\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          flex: 2\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Books\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 34,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid\",\n            children: books.map(b => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card\",\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                children: b.title\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 38,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"small\",\n                children: [b.author, \" \\u2022 \", b.year]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 39,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  marginTop: 8\n                },\n                children: b.description\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 40,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  marginTop: 8,\n                  display: \"flex\",\n                  justifyContent: \"space-between\",\n                  alignItems: \"center\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"small\",\n                  children: [\"Available: \", b.copiesAvailable]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 42,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn btn-primary\",\n                  disabled: b.copiesAvailable <= 0,\n                  onClick: () => handleBorrow(b.id),\n                  children: \"Borrow\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 43,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 41,\n                columnNumber: 19\n              }, this)]\n            }, b.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 37,\n              columnNumber: 17\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 35,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 33,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 32,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          flex: 1\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Add Book\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 53,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(BookForm, {\n            onCreated: load\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 54,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginTop: 12\n          },\n          className: \"card\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"My Borrows\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 13\n          }, this), borrows.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"small\",\n            children: \"No borrows\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 37\n          }, this) : borrows.map(b => {\n            var _b$book;\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                marginBottom: 8\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: (_b$book = b.book) === null || _b$book === void 0 ? void 0 : _b$book.title\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 62,\n                  columnNumber: 24\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 62,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"small\",\n                children: [\"Borrowed: \", new Date(b.borrowedAt).toLocaleDateString()]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 63,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"small\",\n                children: [\"Due: \", new Date(b.dueAt).toLocaleDateString()]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 64,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"small\",\n                children: [\"Returned: \", b.returnedAt ? new Date(b.returnedAt).toLocaleDateString() : \"No\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 65,\n                columnNumber: 19\n              }, this)]\n            }, b.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 61,\n              columnNumber: 17\n            }, this);\n          })]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 29,\n    columnNumber: 5\n  }, this);\n}\n_s(Dashboard, \"Smmi0ClJ8OKsR4cQih4sXgHZqkA=\");\n_c = Dashboard;\nvar _c;\n$RefreshReg$(_c, \"Dashboard\");","map":{"version":3,"names":["React","useEffect","useState","fetchBooks","borrowBook","BookForm","myBorrows","jsxDEV","_jsxDEV","Dashboard","_s","books","setBooks","borrows","setBorrows","load","b","mb","e","handleBorrow","id","alert","err","_err$response","response","data","children","fileName","_jsxFileName","lineNumber","columnNumber","style","display","gap","flex","className","map","title","author","year","marginTop","description","justifyContent","alignItems","copiesAvailable","disabled","onClick","onCreated","length","_b$book","marginBottom","book","Date","borrowedAt","toLocaleDateString","dueAt","returnedAt","_c","$RefreshReg$"],"sources":["/Users/mo/Desktop/BookMent_FullProject/frontend/bookment-frontend/src/pages/Dashboard.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { fetchBooks, borrowBook } from \"../services/books\";\nimport BookForm from \"../components/BookForm\";\nimport { myBorrows } from \"../services/books\";\n\nexport default function Dashboard(){\n  const [books, setBooks] = useState([]);\n  const [borrows, setBorrows] = useState([]);\n\n  useEffect(()=> load(), []);\n\n  const load = async () => {\n    const b = await fetchBooks();\n    setBooks(b);\n    try { const mb = await myBorrows(); setBorrows(mb); } catch(e) { setBorrows([]); }\n  };\n\n  const handleBorrow = async (id) => {\n    try {\n      await borrowBook(id);\n      alert(\"Borrowed!\");\n      load();\n    } catch (err) {\n      alert(err?.response?.data || \"Error borrowing\");\n    }\n  };\n\n  return (\n    <div>\n      <h2>Dashboard</h2>\n      <div style={{display:\"flex\", gap:16}}>\n        <div style={{flex:2}}>\n          <div className=\"card\">\n            <h3>Books</h3>\n            <div className=\"grid\">\n              {books.map(b=> (\n                <div className=\"card\" key={b.id}>\n                  <h4>{b.title}</h4>\n                  <div className=\"small\">{b.author} â€¢ {b.year}</div>\n                  <div style={{marginTop:8}}>{b.description}</div>\n                  <div style={{marginTop:8, display:\"flex\", justifyContent:\"space-between\", alignItems:\"center\"}}>\n                    <div className=\"small\">Available: {b.copiesAvailable}</div>\n                    <button className=\"btn btn-primary\" disabled={b.copiesAvailable<=0} onClick={()=>handleBorrow(b.id)}>Borrow</button>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n        </div>\n\n        <div style={{flex:1}}>\n          <div className=\"card\">\n            <h3>Add Book</h3>\n            <BookForm onCreated={load} />\n          </div>\n\n          <div style={{marginTop:12}} className=\"card\">\n            <h3>My Borrows</h3>\n            {borrows.length === 0 ? <div className=\"small\">No borrows</div> :\n              borrows.map(b => (\n                <div key={b.id} style={{marginBottom:8}}>\n                  <div><strong>{b.book?.title}</strong></div>\n                  <div className=\"small\">Borrowed: {new Date(b.borrowedAt).toLocaleDateString()}</div>\n                  <div className=\"small\">Due: {new Date(b.dueAt).toLocaleDateString()}</div>\n                  <div className=\"small\">Returned: {b.returnedAt ? new Date(b.returnedAt).toLocaleDateString() : \"No\"}</div>\n                </div>\n              ))\n            }\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,SAASC,UAAU,EAAEC,UAAU,QAAQ,mBAAmB;AAC1D,OAAOC,QAAQ,MAAM,wBAAwB;AAC7C,SAASC,SAAS,QAAQ,mBAAmB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE9C,eAAe,SAASC,SAASA,CAAA,EAAE;EAAAC,EAAA;EACjC,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGV,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM,CAACW,OAAO,EAAEC,UAAU,CAAC,GAAGZ,QAAQ,CAAC,EAAE,CAAC;EAE1CD,SAAS,CAAC,MAAKc,IAAI,CAAC,CAAC,EAAE,EAAE,CAAC;EAE1B,MAAMA,IAAI,GAAG,MAAAA,CAAA,KAAY;IACvB,MAAMC,CAAC,GAAG,MAAMb,UAAU,CAAC,CAAC;IAC5BS,QAAQ,CAACI,CAAC,CAAC;IACX,IAAI;MAAE,MAAMC,EAAE,GAAG,MAAMX,SAAS,CAAC,CAAC;MAAEQ,UAAU,CAACG,EAAE,CAAC;IAAE,CAAC,CAAC,OAAMC,CAAC,EAAE;MAAEJ,UAAU,CAAC,EAAE,CAAC;IAAE;EACnF,CAAC;EAED,MAAMK,YAAY,GAAG,MAAOC,EAAE,IAAK;IACjC,IAAI;MACF,MAAMhB,UAAU,CAACgB,EAAE,CAAC;MACpBC,KAAK,CAAC,WAAW,CAAC;MAClBN,IAAI,CAAC,CAAC;IACR,CAAC,CAAC,OAAOO,GAAG,EAAE;MAAA,IAAAC,aAAA;MACZF,KAAK,CAAC,CAAAC,GAAG,aAAHA,GAAG,wBAAAC,aAAA,GAAHD,GAAG,CAAEE,QAAQ,cAAAD,aAAA,uBAAbA,aAAA,CAAeE,IAAI,KAAI,iBAAiB,CAAC;IACjD;EACF,CAAC;EAED,oBACEjB,OAAA;IAAAkB,QAAA,gBACElB,OAAA;MAAAkB,QAAA,EAAI;IAAS;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,eAClBtB,OAAA;MAAKuB,KAAK,EAAE;QAACC,OAAO,EAAC,MAAM;QAAEC,GAAG,EAAC;MAAE,CAAE;MAAAP,QAAA,gBACnClB,OAAA;QAAKuB,KAAK,EAAE;UAACG,IAAI,EAAC;QAAC,CAAE;QAAAR,QAAA,eACnBlB,OAAA;UAAK2B,SAAS,EAAC,MAAM;UAAAT,QAAA,gBACnBlB,OAAA;YAAAkB,QAAA,EAAI;UAAK;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,eACdtB,OAAA;YAAK2B,SAAS,EAAC,MAAM;YAAAT,QAAA,EAClBf,KAAK,CAACyB,GAAG,CAACpB,CAAC,iBACVR,OAAA;cAAK2B,SAAS,EAAC,MAAM;cAAAT,QAAA,gBACnBlB,OAAA;gBAAAkB,QAAA,EAAKV,CAAC,CAACqB;cAAK;gBAAAV,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAK,CAAC,eAClBtB,OAAA;gBAAK2B,SAAS,EAAC,OAAO;gBAAAT,QAAA,GAAEV,CAAC,CAACsB,MAAM,EAAC,UAAG,EAACtB,CAAC,CAACuB,IAAI;cAAA;gBAAAZ,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAM,CAAC,eAClDtB,OAAA;gBAAKuB,KAAK,EAAE;kBAACS,SAAS,EAAC;gBAAC,CAAE;gBAAAd,QAAA,EAAEV,CAAC,CAACyB;cAAW;gBAAAd,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAM,CAAC,eAChDtB,OAAA;gBAAKuB,KAAK,EAAE;kBAACS,SAAS,EAAC,CAAC;kBAAER,OAAO,EAAC,MAAM;kBAAEU,cAAc,EAAC,eAAe;kBAAEC,UAAU,EAAC;gBAAQ,CAAE;gBAAAjB,QAAA,gBAC7FlB,OAAA;kBAAK2B,SAAS,EAAC,OAAO;kBAAAT,QAAA,GAAC,aAAW,EAACV,CAAC,CAAC4B,eAAe;gBAAA;kBAAAjB,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAM,CAAC,eAC3DtB,OAAA;kBAAQ2B,SAAS,EAAC,iBAAiB;kBAACU,QAAQ,EAAE7B,CAAC,CAAC4B,eAAe,IAAE,CAAE;kBAACE,OAAO,EAAEA,CAAA,KAAI3B,YAAY,CAACH,CAAC,CAACI,EAAE,CAAE;kBAAAM,QAAA,EAAC;gBAAM;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAQ,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACjH,CAAC;YAAA,GAPmBd,CAAC,CAACI,EAAE;cAAAO,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAQ1B,CACN;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACC,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC,eAENtB,OAAA;QAAKuB,KAAK,EAAE;UAACG,IAAI,EAAC;QAAC,CAAE;QAAAR,QAAA,gBACnBlB,OAAA;UAAK2B,SAAS,EAAC,MAAM;UAAAT,QAAA,gBACnBlB,OAAA;YAAAkB,QAAA,EAAI;UAAQ;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,eACjBtB,OAAA,CAACH,QAAQ;YAAC0C,SAAS,EAAEhC;UAAK;YAAAY,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC1B,CAAC,eAENtB,OAAA;UAAKuB,KAAK,EAAE;YAACS,SAAS,EAAC;UAAE,CAAE;UAACL,SAAS,EAAC,MAAM;UAAAT,QAAA,gBAC1ClB,OAAA;YAAAkB,QAAA,EAAI;UAAU;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,EAClBjB,OAAO,CAACmC,MAAM,KAAK,CAAC,gBAAGxC,OAAA;YAAK2B,SAAS,EAAC,OAAO;YAAAT,QAAA,EAAC;UAAU;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAK,CAAC,GAC7DjB,OAAO,CAACuB,GAAG,CAACpB,CAAC;YAAA,IAAAiC,OAAA;YAAA,oBACXzC,OAAA;cAAgBuB,KAAK,EAAE;gBAACmB,YAAY,EAAC;cAAC,CAAE;cAAAxB,QAAA,gBACtClB,OAAA;gBAAAkB,QAAA,eAAKlB,OAAA;kBAAAkB,QAAA,GAAAuB,OAAA,GAASjC,CAAC,CAACmC,IAAI,cAAAF,OAAA,uBAANA,OAAA,CAAQZ;gBAAK;kBAAAV,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAS;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAK,CAAC,eAC3CtB,OAAA;gBAAK2B,SAAS,EAAC,OAAO;gBAAAT,QAAA,GAAC,YAAU,EAAC,IAAI0B,IAAI,CAACpC,CAAC,CAACqC,UAAU,CAAC,CAACC,kBAAkB,CAAC,CAAC;cAAA;gBAAA3B,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAM,CAAC,eACpFtB,OAAA;gBAAK2B,SAAS,EAAC,OAAO;gBAAAT,QAAA,GAAC,OAAK,EAAC,IAAI0B,IAAI,CAACpC,CAAC,CAACuC,KAAK,CAAC,CAACD,kBAAkB,CAAC,CAAC;cAAA;gBAAA3B,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAM,CAAC,eAC1EtB,OAAA;gBAAK2B,SAAS,EAAC,OAAO;gBAAAT,QAAA,GAAC,YAAU,EAACV,CAAC,CAACwC,UAAU,GAAG,IAAIJ,IAAI,CAACpC,CAAC,CAACwC,UAAU,CAAC,CAACF,kBAAkB,CAAC,CAAC,GAAG,IAAI;cAAA;gBAAA3B,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAM,CAAC;YAAA,GAJlGd,CAAC,CAACI,EAAE;cAAAO,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAKT,CAAC;UAAA,CACP,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAED,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV;AAACpB,EAAA,CApEuBD,SAAS;AAAAgD,EAAA,GAAThD,SAAS;AAAA,IAAAgD,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}